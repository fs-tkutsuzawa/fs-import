まずここでやりたいのは何かというと、

### ゴール

UI周り、@ と、DB周りの現状実装を分析することで、UI／DBサイドとコアロジック@ がやりとしする際のInterfaceの仕様を定めること

- UI・DB側と、コアロジックサイドが個別に実装されてきている。UI・DBサイドで色々なパラメータ設定や、科目の紐付け設定をしたりするが、結局、これらの実績値や設定値の何をコアロジックに渡して、コアロジックをどう叩いて、なんのオブジェクトを受け取って、UI・DB側に何を渡せばいいのかわからない。
- その全体感が不透明なのと、何をどうするという仕様やFrom／Toの仕切りがわかっていない。全体感を整合性高く、正確に、論点として、具体的に、構造化して、先の見通しも含めた形で、これらを把握したい。
- まずは、具体的な作戦指示を与えるための準備として、これらのニーズに応えてくれ。

---

①いいペースです。ただ、MermaidがURLだけどシンタックスエラーなので、ちゃんと厳密な文法に従うことを胸としてください

②さらに、JSONスキーマでI／Fを記述し切りたい。特に、コアロジックからの返り値をどのようなJSONスキーマで、UI側に（DataGridに）渡せばいいのか知りたい。

③むしろ、UI側のJSON形式で、コアロジックから返り値を受け取れるようにしておきたいので、方針仕様をエンジニアに知らせるための要件も書き出しておいて。

④JSONスキーマは、どっかのimport_dfに渡すCSVのスキーマみたいな感じでいいんじゃないかと思っている。いわば、全銀ネット仕様のようなもの。特に、コアロジック側から、渡って来なければいけないのは、

- Period
  - period value
  - yearly?monthly?
- account
- value
- その他 - FS type - その他重要事項
  → メタ的なデータは各Rowの先頭にまとめるとか、なんとかいずれにしても"上手い感じ”でやりたい！！！

制約：とにかく動くものを早く作りたい！クリティカル骨子、ミニマムパス、クリティカルプリンシプル、ツボを押さえに行く方向でやろう。

この指示の目的：ここからコアロジックの追加開発を行うわけだけど、とりあえず、UI側のエンジニアにどういう仕様のJSONスキーマが渡ってくるのかだけ、伝えて、あっちはあっちでダミーデータで開発を別途進めさせたい。こちらの完成を待っていたら時間がかかるので、とにかく、そういう実務的ニーズもあります。

---

Excellentです。ただJSONのところはもう少し研ぎたい。というのも、本来これらは、user_accountsやglobal_accountsから取ってきたデータだったりするわけなので、このDDLをよく読んでJSON構造の例示やスキーマを書くようにしておきましょう。なんせ、UI側のエンジニアはこのDDLを読んでUIを作ったりAPI書いたりしてるので、このDDLに根差した内容である方が親切だからです。

---

OK、いい感じです。そしたら、
