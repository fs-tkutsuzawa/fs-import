そうですね、要は、ここでBSの実装は全体感としては、CF計算書を計算し、その計算結果である当期CFを割り出し、前期末BSの現預金残高にこれを足し戻すことで、当期BSの現預金残高が定まる。その結果、当期BSがバランスするということを実現するための、BSスキームを実装することが目的です。

要は、プリンシプルにも書いてますが、まず、

- PLは当期分、BSは前期と当期分（当期ぶんは現預金がブランク）があり、
- これらを元に当期CFを計算する必要があり、
- 当期CFは要は、PLの非資金性科目とBSのデルタをとってくるだけであり、つまり
  - PLの非資金性科目はBalance＆Change型を拾うだけで十分であり
    - だから、B＆Cで拾えるので、わざわざisNoncash見たなラベルは入らず、普通に計算できれば良い
  - BSのデルタは、現預金以外のBS科目において、PARAMETER型であることがわかっている科目の当期引く前期のデルタをとってくるだけであり、
  - Balance＆ChangeはBSのPARAMETER型以外は全てこれであり、Balance&ChangeにはPP&Eなどの三表以外の数値やFinancing、非資金性科目などを拾うもの
- そうして計算されたCFを、最後に前期のBS現預金に足すことで、当期BS現預金が定まり
- その結果初めてBSがバランスする
  ということなんですよ。

この連動フローを実現するための、プリンシプルであり、各種コアロジックなんです。PL ASTは、このフローの中のPL部分を実現するためのオブジェクトなんです。

結論、このコアロジックによって

1. BSやPLはPARAMETER型（BSはB&C型も含む）によって、実績値（前期）を元に計画値（Forecast）が計算できること
2. 各期BSとPLについて、
   - 非資金性科目の拾い上げ（BS側で定義されたB＆C型によって拾われる）、
   - BS上のデルタ差分の拾い上げ（←PARAMETER型は全部これ）、
   - BS上の設備投資などのFinancial Statement外のValue割り当てによるデルタ差分の拾い上げ（いわゆるBalance＆Change型）
   - これら三つを捉えることで、CF科目を各科目ごとに算出
3. CF科目は各期において上記Process２で拾ってきた、非資金性科目（B＆Cで表現済み）かBSデルタ差分（PARAMETER型かB＆C型）である
   - CFは、計画計算はされない。あくまでも、BS・PLから上記Process２で拾ってきた、各期ごとにユニークな数値である
4. 最終のCFを足し合わせることで、正味の現金差分として当期CFを算出し、これを「前期BS現預金残高＋当期CF＝当期BS現預金残高」として、当期BSでブランクだった、現預金を計算する。（※ここまできて初めてBSは貸借一致する！！！！）

こういう、思考フローが人間にはあるんです。この思考フローをよく遵守した上で、テスト設計・開発・実装がなされなければなりません。
