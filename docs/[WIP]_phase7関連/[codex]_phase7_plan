# Phase7 実装計画（最短ルート・最小差分指向）

## ゴール再確認
- コアロジックの年次計算結果を \ に確実に表示する。
- 月次列を含む追加機能は後回し。必要時はブランク表示で可。
- Lint warning のうち今回触れた周辺を優先的に解消し、最小限のレッドを取り除く。

## 制約
- 既存の UI 構造を崩さない（最小差分）。
- API 結果が取得できなかった場合は従来通りダミーデータでフォールバック。
- 月次/調整列の扱いは暫定（空表示）とし、月次展開ロジックの実装はスコープ外。
- 既存 warning の一掃は求められていないが、新規追加分や今回編集した箇所の warning は可能な限り解消する。

## TODO（実装順）
1. **列生成の整理**
   - \ で API 結果表示時は年次カラムのみ生成するよう \ と \ 生成処理を調整。
   - 月次/調整列は生成しない or 値は \ のまま表示（UIでは空白）。
2. **displayRows の分岐調整**
   - API使用時は比率行やバランスチェック計算をスキップし、サーバ結果そのままを表示。
3. **Lint warning ケア**
   - 新規で増えた \、未使用変数などを可能な範囲で解消。
   - 既存 warning は Issue 化や TODO 記述に留める。
4. **テスト**
   - \ テストは済。\ に関しては簡易な render テスト（API結果入力時に年次列が並ぶこと）を追加するか要検討。
5. **ドキュメント更新**
   - \ との整合を保ちつつ、結果差異や残課題をステータス更新。

## チェックリスト
- [ ] API結果表示時、年次列以外の余計なカラムが生成されない。
- [ ] ダミーデータ利用時の既存挙動が崩れていない（比率行含む）。
- [ ] UIでジョブ実行→結果反映→クリアの一連操作が行える。

## 備考
- 月次展開や追加指標（比率行など）をサーバ側で返す設計にするのか、UIで算出するのかは別フェーズで要検討。
- \ など他画面とのロジック共通化はPhase7後に検討。
